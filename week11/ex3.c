The first program outputs "test" 2 times with one new line for each. This is because line buffering is the default on most implementations, so when the fork command executes and gives each process a copy of the data, this copy includes the buffer that is not yet flushed. Once each fork prints the new line, they both flush their buffer to the stdout stream.
The second program Outputs the string "test" with 3 new lines (2 empty lines) after it. This is because the first printf call was flushed to the screen before forking as it had a '\n' in it. After that, each of the 2 new forks simply prints yet another new line.
